# Maintainer: pavbaranov <pavbaranov at gmail dot com>

pkgname=draco
pkgver=0.9.0.rc2
pkgrel=1
pkgfullname="${pkgname%-*}-${_pkgver}"
pkgdesc="A Lightweight QT5 Desktop; Lumina DE fork"
arch=('x86_64')
url="https://www.dracolinux.org/"
license=('BSD' 'GPL2' 'LGPL2.1')
depends=('poppler-qt5' 'qt5-x11extras' 'libxss' 'libxrandr')
optdepends=('xorg-xbacklight: required for changing screen brightness'
            'qt5ct: required for configuration manipulations'
            'alsa-utils: required for adjusting audio volume'
            'acpi: required for monitoring battery life'
            'numlockx: required for changign state of numlock at login'
            'pavucontrol: required for detatched audio mixer'
            'fluxmod-styles: A good set of Fluxbox themes to improve the appearence of window decorations'
            'network-manager-applet: Manage network connections from panel'
            'xterm: Terminal emulator'
            'openbox: window manager for Draco DE'
            'obmenu'
            'obconf-qt'
            'openbox-themes'
            # you should to install any icon theme too
            )
makedepends=('qt5-base' 'qt5-svg' 'qt5-tools')
conflicts=("draco-de-git" "draco-desktop-git" "insight-fm")
source=("https://github.com/rodlie/draco/archive/${pkgver%.*}_rc2.tar.gz")
sha512sums=('7c339b5144d8f623a4ec07a4a50c74c62c025063e5ceeed30dab83253a2fcd56ccf2efca72b1ea0a5b1a4dc6efb851ea3d80a1960138f484d818ebdbe5bdf80d')

prepare() {
    mkdir -p build
    }
    
build() {
    cd build
    cmake ../$pkgname-${pkgver%.*}_rc2 \
        -DCMAKE_INSTALL_PREFIX=/usr \
        -DCMAKE_INSTALL_LIBDIR=lib \
        -DUSE_XINPUT=Yes \
        -DLIB_INSTALL_DIR=/usr/lib \
        -DCMAKE_BUILD_TYPE=Release
    make
    }

package() {
    cd build
    make DESTDIR="${pkgdir}" install
    }
